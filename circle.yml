machine:
  xcode:
    version: 9.0
  environment:
    XCODE_WORKSPACE: "AeroGearSyncJsonPatch.xcworkspace"
    XCODE_SCHEME: "AeroGearSyncJsonPatch"
    SIMULATOR: "iPhone 7"
    OS: "11.0"

test:
  override:
    - set -o pipefail && xcodebuild -workspace $XCODE_WORKSPACE -scheme $XCODE_SCHEME -sdk iphonesimulator -destination "platform=iOS Simulator,name=${SIMULATOR},OS=${OS}" clean build test CODE_SIGNING_REQUIRED=NO CODE_SIGN_IDENTITY= PROVISIONING_PROFILE= | tee $CIRCLE_ARTIFACTS/xcode_raw.log | xcpretty --color --report junit --output $CIRCLE_TEST_REPORTS/xcode/results.xml
